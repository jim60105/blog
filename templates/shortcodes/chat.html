{%- if speaker == "chatgpt" -%}
	{%- set speaker_name = "ChatGPT" -%}
	{%- set speaker_avatar = "/avatars/chatgpt.svg" -%}
	{%- set _speaker_align = "left" -%}
	{%- set speaker_color = "white" -%}
{%- elif speaker == "claude" -%}
	{%- set speaker_name = "Claude" -%}
	{%- set speaker_avatar = "/avatars/claude.svg" -%}
	{%- set _speaker_align = "left" -%}
	{%- set speaker_color = "#DE7356" -%}
{%- elif speaker == "gemini" -%}
	{%- set speaker_name = "Gemini" -%}
	{%- set speaker_avatar = "/avatars/gemini.svg" -%}
	{%- set _speaker_align = "left" -%}
	{%- set speaker_color = "#4796E3" -%}
{%- elif speaker == "copilot" -%}
	{%- set speaker_name = "GitHub Copilot" -%}
	{%- set speaker_avatar = "/avatars/copilot.svg" -%}
	{%- set _speaker_align = "left" -%}
	{%- set speaker_color = "white" -%}
{%- elif speaker == "felo" -%}
	{%- set speaker_name = "Felo Search" -%}
	{%- set speaker_avatar = "/avatars/felo.svg" -%}
	{%- set _speaker_align = "left" -%}
	{%- set speaker_color = "#24ABF7" -%}
{%- elif speaker == "jim" or speaker == "Jim" -%}
	{%- set speaker_name = "琳" -%}
	{%- set speaker_avatar = "/avatars/jim.jpg" -%}
	{%- set _speaker_align = "right" -%}
	{%- set speaker_color = "white" -%}
{%- elif speaker == "yoruka" or speaker == "Yoruka" -%}
	{%- set speaker_name = "須多夜花" -%}
	{%- set speaker_avatar = "/avatars/yoruka.jpg" -%}
	{%- set _speaker_align = "left" -%}
	{%- set speaker_color = "#e34565ff" -%}
{%- else -%}
	{%- set speaker_name = "User" -%}
	{%- set speaker_avatar = "/avatars/user.svg" -%}
	{%- set _speaker_align = "left" -%}
	{%- set speaker_color = "white" -%}
{%- endif -%}

{%- if align is defined -%}
	{%- set speaker_align = align -%}
{%- else -%}
	{%- set speaker_align = _speaker_align -%}
{%- endif -%}

<div class="chat-message chat-message--{{ speaker_align }}" role="article" aria-labelledby="chat-speaker-{{ loop.index0 | default(value=" 0") }}">
	<div class="chat-message__avatar">
		<img src="{{ speaker_avatar }}" alt="{{ speaker_name }} avatar" class="chat-avatar no-hover" width="40" height="40" loading="lazy" decoding="async"/>
	</div>
	<div class="chat-message__content">
		<div class="chat-speaker" id="chat-speaker-{{ loop.index0 | default(value=" 0") }}" style="color: {{ speaker_color }}">
			{{ speaker_name }}
		</div>
		<div class="chat-bubble chat-bubble--{{ speaker_align }}">
			{{ body | trim | markdown | safe }}
		</div>
	</div>
</div>
